(function(fun){typeof define=="function"&&define.amd?define(fun):fun()})(function(){"use strict";const mynpcPincodeStorageKey="mynpc_pincode",mynpcInputCodeTextCheckState="Please enter PIN code to check delivery time & Pay on Delivery Availability",mynpcInputCodeTextUnserviceableState="Unfortunately we do not ship to your pincode",mynpcInvalidPincodeMsg="Please enter a valid pincode",mynpcPlsTryAgainMsg="Please try again",mynpcGetByPrefix="Shipped by",mynpcCheckStateClass="mynpc-state-check",mynpcServiceableStateClass="mynpc-state-serviceable",mynpcUnserviceableStateClass="mynpc-state-unserviceable",mynpcInputCodeTextErrorClass="mynpc-input-error",mynpcHideClass="mynpc-hide",mynpcMainContainerSelector=".mynpc-container",mynpcErrorContainerSelector=".mynpc-error-container",mynpcErrorTextSelector=".mynpc-error-text",mynpcDeliveryFormSelector=".mynpc-check-delivery-form",mynpcDeliveryFormCodeInputSelector=".mynpc-code-input",mynpcDeliveryFormCodeInputProductKeySelector=".mynpc-code-input-product-key",mynpcCheckCodeButtonSelector=".mynpc-check-code-button",mynpcChangeCodeButtonSelector=".mynpc-change-code-button",mynpcInputCodeTextSelector=".mynpc-input-code-text",mynpcDeliveryInfoGetBySelector=".mynpc-delivery-info-get-by",mynpcDeliveryInfoItemTitleSelector=".mynpc-delivery-info-item-title";function mynpcEnableInputCode(mainContainer){var codeInput=mainContainer.querySelector(mynpcDeliveryFormCodeInputSelector);codeInput.disabled=!1}function mynpcDisableInputCode(mainContainer){var codeInput=mainContainer.querySelector(mynpcDeliveryFormCodeInputSelector);codeInput.disabled=!0}function mynpcClearPincode(mainContainer){mynpcRemoveSavedPincode();var codeInput=mainContainer.querySelector(mynpcDeliveryFormCodeInputSelector);codeInput.value=""}function mynpcShowErrorMsg(mainContainer,msg){const errorContainer=mainContainer.querySelector(mynpcErrorContainerSelector);var errorText=mainContainer.querySelector(mynpcErrorTextSelector);errorText.innerText=msg,errorContainer.classList.remove(mynpcHideClass),setTimeout(function(){errorContainer.classList.add(mynpcHideClass)},3e3)}function mynpcSwitchToCheckState(mainContainer){mainContainer.classList.remove(mynpcServiceableStateClass),mainContainer.classList.remove(mynpcUnserviceableStateClass),mainContainer.classList.add(mynpcCheckStateClass),mynpcEnableInputCode(mainContainer),mynpcClearPincode(mainContainer);var inputCodeText=mainContainer.querySelector(mynpcInputCodeTextSelector);inputCodeText.innerText=mynpcInputCodeTextCheckState,inputCodeText.classList.remove(mynpcInputCodeTextErrorClass)}function mynpcSwitchToServiceableState(mainContainer,respJson){var basicJson=respJson.data.basic,getBy=mainContainer.querySelector(mynpcDeliveryInfoGetBySelector),getByTitle=getBy.querySelector(mynpcDeliveryInfoItemTitleSelector);getByTitle.innerText=mynpcGetByPrefix+mynpcGetFormattedDate(basicJson.delivery_in_days),mainContainer.classList.remove(mynpcCheckStateClass),mainContainer.classList.remove(mynpcUnserviceableStateClass),mainContainer.classList.add(mynpcServiceableStateClass),mynpcDisableInputCode(mainContainer)}function mynpcSwitchToUnserviceableState(mainContainer){mainContainer.classList.remove(mynpcCheckStateClass),mainContainer.classList.remove(mynpcServiceableStateClass),mainContainer.classList.add(mynpcUnserviceableStateClass),mynpcDisableInputCode(mainContainer);var inputCodeText=mainContainer.querySelector(mynpcInputCodeTextSelector);inputCodeText.innerText=mynpcInputCodeTextUnserviceableState,inputCodeText.classList.add(mynpcInputCodeTextErrorClass)}function mynpcInitEventHandlers(){for(var deliveryFormEles=document.querySelectorAll(mynpcDeliveryFormSelector),index=0;index<deliveryFormEles.length;){var deliveryForm=deliveryFormEles[index];deliveryForm.onsubmit=function(event){event.preventDefault(),mynpcProcessFormSubmit(this)},index+=1}for(var codeInputEles=document.querySelectorAll(mynpcDeliveryFormCodeInputSelector),index=0;index<codeInputEles.length;){var codeInput=codeInputEles[index];codeInput.onchange=function(event){return mynpcProcessFormPincodeInput(this)},codeInput.onkeyup=function(event){return mynpcProcessFormPincodeInput(this)},index+=1}for(var changeCodeButtonEles=document.querySelectorAll(mynpcChangeCodeButtonSelector),index=0;index<changeCodeButtonEles.length;){var changeCodeButton=changeCodeButtonEles[index];changeCodeButton.addEventListener("click",function(event){event.preventDefault();var mainContainer=this.closest(mynpcMainContainerSelector);mynpcSwitchToCheckState(mainContainer)}),index+=1}}function mynpcProcessFormSubmit(form){debugger;var mainContainer=form.closest(mynpcMainContainerSelector),pincode=form.querySelector(mynpcDeliveryFormCodeInputSelector).value,productKey=form.querySelector(mynpcDeliveryFormCodeInputProductKeySelector).value,pincodeInt=parseInt(pincode,10);const pincodeToCheck=pincodeInt.toString();if(isNaN(pincodeInt)||pincodeToCheck.length!==6){mynpcShowErrorMsg(mainContainer,mynpcInvalidPincodeMsg);return}var httpRequest=new XMLHttpRequest,httpRequestUrl="https://api-pincheck.upscalio.com/accounts/e5d9cab1-ccca-45ca-b967-33ec6e75194b/delivery/pincodes/"+pincodeToCheck;httpRequestUrl+="?product_key="+encodeURIComponent(productKey),httpRequest.onreadystatechange=function(){if(httpRequest.readyState===4){if(mynpcSavePincode(pincodeToCheck),httpRequest.status===200){var respJson=JSON.parse(httpRequest.responseText);mynpcSwitchToServiceableState(mainContainer,respJson);return}if(httpRequest.status===404){mynpcSwitchToUnserviceableState(mainContainer);return}if(httpRequest.status===400){mynpcShowErrorMsg(mainContainer,mynpcInvalidPincodeMsg);return}}},httpRequest.open("GET",httpRequestUrl,!0),httpRequest.send(null)}function mynpcProcessFormPincodeInput(codeInput){var value=codeInput.value,valueInt=parseInt(value,10);return!isNaN(valueInt)&&valueInt?(value=valueInt.toString(),value.length<=6?codeInput.value=value:codeInput.value=value.substring(0,6),!0):value===""?(codeInput.value=value,!0):(codeInput.value="",!1)}function mynpcGetFormattedDate(daysToAdd){var today=new Date,reqDate=new Date(new Date().setDate(today.getDate()+daysToAdd)),wk=new Intl.DateTimeFormat("en",{weekday:"short"}).format(reqDate),mo=new Intl.DateTimeFormat("en",{month:"short"}).format(reqDate),da=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(reqDate);return`${wk}, ${mo} ${da}`}function mynpcSavePincode(pincode){try{localStorage.setItem(mynpcPincodeStorageKey,pincode)}catch{}sessionStorage.setItem(mynpcPincodeStorageKey,pincode)}function mynpcReadSavedPincode(){const savedPincode=sessionStorage.getItem(mynpcPincodeStorageKey);if(savedPincode!==null)return savedPincode;try{return localStorage.getItem(mynpcPincodeStorageKey)}catch{return null}}function mynpcRemoveSavedPincode(){try{localStorage.removeItem(mynpcPincodeStorageKey)}catch{}sessionStorage.removeItem(mynpcPincodeStorageKey)}window.onload=function(){mynpcInitEventHandlers();var mainContainer=document.querySelector(mynpcMainContainerSelector);mainContainer.classList.remove(mynpcHideClass);const mynpcSavedPincode=mynpcReadSavedPincode();if(mynpcSavedPincode!==null)for(var codeInputEles=document.querySelectorAll(mynpcDeliveryFormCodeInputSelector),index=0;index<codeInputEles.length;){var codeInput=codeInputEles[index];codeInput.value=mynpcSavedPincode;var parentEle=codeInput.parentElement,checkCodeButton=parentEle.querySelector(mynpcCheckCodeButtonSelector);checkCodeButton.click(),index+=1}}});
//# sourceMappingURL=/cdn/shop/t/70/assets/custom.js.map?v=94537975130589936711758428970
