window.solution=window.solution||{},solution.SidebarFilters=function(){var selectors={element:"#sidebar-form",submitBtn:"#sidebar-form-submit",errorSelector:"#error-message",apiKey1:"AIzaSyCrvvcQ3PrXtVwYn19u925eg3cya_iVPu4",sheetKey1:"11Ke8hDwhPVWRv-imMp-xIUYKK5mw8VVJM7FOWEWwLfo",sheetKey:"1LL5CcXr3iKtHF5uTHzwj-e6J4zaZ9zgrVvnEeziqtLA",apiKey:"AIzaSyBUkukj9VAd6IHVnqKOof5KUwabzFL3AIA"};if(!$(selectors.element).length)return;function _handleSubmitBtn(data){$(selectors.submitBtn).on("click",function(evt){evt.preventDefault();var selectedValues=[];if($("select[name=filter]").each(function(){var self=$(this);self.val()?selectedValues.push(self.val()):self.addClass("select--error")}),selectedValues.length===3){var matchedArray=data.find(arr=>arr[0]===selectedValues[0]&&arr[1]===selectedValues[1]&&arr[2]===selectedValues[2]),collectionUrl=matchedArray[3];collectionUrl&&(location.href=collectionUrl)}})}function _fillOtherDropdowns(index,value,data){var currentIndex=parseInt(index),nextOptions=[];if(!(currentIndex>=5)){for(var d=0;d<data.length;d++)data[d][currentIndex-1]==value&&nextOptions.push(data[d][currentIndex]);var uniqueDropdownArray=nextOptions.filter(function(q,i){return nextOptions.indexOf(q)==i}),nextSelectBox=$('[name=filter][data-index="'+(currentIndex+1)+'"]');if(nextSelectBox.length){for(var f=0;f<uniqueDropdownArray.length;f++)if(uniqueDropdownArray[f]&&uniqueDropdownArray[f]!=""){var optionExists=nextSelectBox.find('option[value="'+uniqueDropdownArray[f]+'"]').length>0;optionExists||nextSelectBox.append($("<option>",{value:uniqueDropdownArray[f],text:uniqueDropdownArray[f]}))}}}}function _fillFirstDropdown(data){debugger;for(var dropdownArray=[],allData=[],i=1;i<data.length;i++)!data[i]||!data[i].length||data[i]&&(dropdownArray.push(data[i][0]),allData.push(data[i]));for(var uniqueDropdownArray=dropdownArray.filter(function(q,i2){return dropdownArray.indexOf(q)==i2}),f=0;f<uniqueDropdownArray.length;f++)uniqueDropdownArray[f]!=""&&$('[name=filter][data-index="1"]').append($("<option>",{value:uniqueDropdownArray[f],text:uniqueDropdownArray[f]}));$(document).on("change","select[name=filter]",function(evt){var value=$(this).val(),index=$(this).attr("data-index");_fillOtherDropdowns(index,value,allData)})}function _getSheetData(){$.ajax({url:"https://sheets.googleapis.com/v4/spreadsheets/"+selectors.sheetKey+"/values/Sheet1?key="+selectors.apiKey,dataType:"json",success:function(data){_fillFirstDropdown(data.values),_handleSubmitBtn(data.values)}})}function _getSheetData3(){const url="https://drive.google.com/file/d/1CvhczSHLoJoqhTX_8RvVRLG8OkTZRKZA/view",url2="https://sheets.googleapis.com/v4/spreadsheets/"+selectors.sheetKey+"/values/All?key="+selectors.apiKey;fetch(url).then(response=>{if(!response.ok)throw new Error("Network response was not ok");return response.json()}).then(jsonData=>{console.log(jsonData),_fillFirstDropdown(jsonData.values),_handleSubmitBtn(jsonData.values)}).catch(error=>{console.error("Error fetching the file:",error)})}function _initEventListeners(){$("select[name=filter]").on("click",function(evt){evt.preventDefault();var self=$(this);self.hasClass("select--error")&&self.removeClass("select--error")})}return{init:function(){_getSheetData(),_initEventListeners()}}}(),$(document).ready(function(){solution.SidebarFilters.init()}),$('[name=filter][data-index="2"]').on("change",function(){$('[name=filter][data-index="3"]').find("option").remove(),$('[name=filter][data-index="3"]').append($("<option>",{value:"",text:"Model",disabled:"",selected:""}))}),$('[name=filter][data-index="1"]').on("change",function(){$('[name=filter][data-index="2"]').find("option").remove(),$('[name=filter][data-index="2"]').append($("<option>",{value:"",text:"Brand",disabled:"",selected:""})),$('[name=filter][data-index="3"]').find("option").remove(),$('[name=filter][data-index="3"]').append($("<option>",{value:"",text:"Model",disabled:"",selected:""}))}),$('input[name="vehicle-type"]').change(function(){$(".select-vehicle").removeClass("selected"),$(this).closest(".select-vehicle").addClass("selected")}),$(document).on("click",'input[name="vehicle-type"]',function(evt){var selectedId=$(this).attr("id");selectedId=="bike"&&($('[id="form-id-1"]').find("option").removeAttr("selected"),$("#form-id-1 option").eq(2).prop("selected",!0).change()),selectedId=="car"&&($('[id="form-id-1"]').find("option").removeAttr("selected"),$("#form-id-1 option").eq(1).prop("selected",!0).change())}),$(window).on("load",function(){window.innerWidth<990&&$("#car").click()}),$(document).on("click","#reset-vehicle",function(evt){window.innerWidth>990?($("#form-id-1 option").eq(0).prop("selected",!0).change(),$('[name=filter][data-index="2"]').find("option").remove(),$('[name=filter][data-index="2"]').append($("<option>",{value:"",text:"Brand",disabled:"",selected:""})),$('[name=filter][data-index="3"]').find("option").remove(),$('[name=filter][data-index="3"]').append($("<option>",{value:"",text:"Model",disabled:"",selected:""}))):$("#car").click()});
//# sourceMappingURL=/cdn/shop/t/70/assets/select-vehicle.js.map?v=180782367182399357471758428970
