var variantImageAutomator=function(){function convertLanguageCode(languageCode){let langCode=languageCode.toUpperCase();return"PT-BR"===langCode||"PT-PT"===langCode||"ZH-CN"===langCode||"ZH-TW"===langCode?langCode.replace("-","_"):langCode.match(/^[a-zA-Z]{2}-[a-zA-Z]{2}$/)?langCode.substring(0,2):langCode}async function handleMultipartResponse(response){const reader=response.body.getReader(),decoder=new TextDecoder;let buffer="";const parts={initial:null,deferred:null};for(;;){const{done:done,value:value}=await reader.read();if(done)break;if(buffer+=decoder.decode(value,{stream:!0}),buffer.includes("--graphql")){const chunks=buffer.split("--graphql");buffer=chunks.pop()||"";for(const chunk of chunks){if(!chunk.trim())continue;const jsonMatch=chunk.match(/{.*}/s);if(jsonMatch)try{const data=JSON.parse(jsonMatch[0]);parts.initial?parts.deferred=data:parts.initial=data}catch(e){console.error("Error parsing chunk:",e)}}}}return parts}async function fetchProductVariantsWithGraphQLDefer(handle){const startTime=performance.now();let allVariants=[],hasNextPage=!0,cursor=null,productData=null,retryCount=0;const MAX_RETRIES=3,API_VERSION="2025-01";let locale=convertLanguageCode(window.Shopify.locale),countryIsoCode=window.Shopify.country;try{let shopDomain=window.Shopify?.shop;const endpoint=shopDomain?`https://${shopDomain}/api/${API_VERSION}/graphql.json`:`/api/${API_VERSION}/graphql.json`;if(!handle){const pathMatch=window.location.pathname.match(/\/products\/([^\/]+)/);if(pathMatch&&pathMatch[1])handle=decodeURIComponent(pathMatch[1]);else{let metaUrl=document.querySelector('meta[property="og:url"]');metaUrl&&(handle=decodeURIComponent(metaUrl.split("/").pop()))}if(!handle)throw new Error("Couldn't determine product handle")}for(;hasNextPage&&retryCount<MAX_RETRIES;)try{const fetchOptions={method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":storefront_access_token,Accept:"multipart/mixed; deferSpec=20220824"},body:JSON.stringify({query:graphqlQuery,variables:{handle:handle,variantsCursor:cursor,locale:locale,countryIsoCode:countryIsoCode.toUpperCase()}}),credentials:"same-origin"},controller=new AbortController,timeoutId=setTimeout((()=>controller.abort()),6500);fetchOptions.signal=controller.signal;const response=await fetch(endpoint,fetchOptions);if(clearTimeout(timeoutId),!response.ok)throw new Error(`HTTP error! Status: ${response.status}`);let pageResponse;if((response.headers.get("Content-Type")||"").includes("multipart/mixed"))pageResponse=await handleMultipartResponse(response);else{pageResponse={initial:await response.json(),deferred:null}}!productData&&pageResponse.initial?.data?.product&&(productData={...pageResponse.initial.data.product});const deferData=pageResponse.deferred?.incremental?.[pageResponse.deferred.incremental.length-1]?.data?.variants;if(deferData){const variants=deferData.nodes||[];allVariants=[...allVariants,...variants],hasNextPage=deferData.pageInfo?.hasNextPage||!1,cursor=deferData.pageInfo?.endCursor||null,retryCount=0}else hasNextPage=!1}catch(error){retryCount++,console.warn(`Attempt ${retryCount} failed: ${error.message}`),retryCount>=MAX_RETRIES?(console.error("Max retries reached"),hasNextPage=!1):await new Promise((resolve=>setTimeout(resolve,1e3*Math.pow(2,retryCount-1))))}productData&&(productData.variants={...allVariants});const endTime=performance.now();return console.log(`Execution time: ${(endTime-startTime).toFixed(2)} ms`),productJson=convertShopifyGraphQLToProductJSON(productData),void(window.via_product_handle=`/products/${productJson.handle}`)}catch(error){throw console.error("Error while fetching variants:",error),error}}function fetchProductDataFromStoreFront(callback){let productHandle="";const pathMatch=window.location.pathname.match(/\/products\/([^\/]+)/);if(pathMatch&&pathMatch[1])productHandle=decodeURIComponent(pathMatch[1]);else if(product_url){const handle=product_url.match(/\/products\/([^\/]+)/);productHandle=decodeURIComponent(handle[1])}productHandle?window.requestIdleCallback?requestIdleCallback((()=>{fetchProductVariantsWithGraphQLDefer(productHandle).then((()=>{callback()})).catch((error=>{console.error("Failed to fetch product data:",error)}))}),{timeout:2e3}):setTimeout((()=>{fetchProductVariantsWithGraphQLDefer(productHandle).then((()=>{callback()})).catch((error=>{console.error("Failed to fetch product data:",error)}))}),1e3):console.error("Could not determine product handle from URL")}function convertShopifyGraphQLToProductJSON(graphqlData){const extractNumericId=globalId=>globalId?parseInt(globalId.split("/").pop()):null,extractOptionValues=options=>options.map(((option,index)=>({name:option.name,position:index+1,values:option.values||option.optionValues?.map((ov=>ov.name))||[]}))),createVariants=(variantsData,imagesData,mediaData)=>(Array.isArray(variantsData)?variantsData:Object.values(variantsData||{})).map((variant=>{const id=extractNumericId(variant.id),featuredImageId=variant.image?.id;delete variant.id,delete variant.image?.id;const variantImage=imagesData?.nodes?.find((img=>img.id===featuredImageId))||variant.image,variantMedia=mediaData?.nodes?.find((media=>media.previewImage.url===variantImage?.url))||null;return{id:id,featured_image:variantImage?{alt:variantImage.altText||variant.name,id:extractNumericId(variantImage.id),position:1,preview_image:{aspect_ratio:variantImage.width&&variantImage.height?variantImage.width/variantImage.height:.75,height:variantImage.height||252,width:variantImage.width||189,src:variantImage.url||""}}:null,featured_media:variantMedia?{alt:variantMedia.previewImage.altText||variant.name,id:extractNumericId(variantMedia.id),position:1,preview_image:{aspect_ratio:variantMedia.width&&variantMedia.height?variantMedia?.width/variantMedia?.height:.75,height:variantMedia?.height||252,width:variantMedia?.width||189,src:variantMedia.previewImage.url||""}}:null,...variant}})),extractImages=imagesData=>{if(!imagesData)return[];return(imagesData.nodes||imagesData).map(((img,index)=>({id:extractNumericId(img.id),product_id:extractNumericId(graphqlData.id),src:img.url,position:index}))).filter(Boolean)},extractMedia=mediaData=>{if(!mediaData)return[];return(mediaData.nodes||mediaData).map((media=>({alt:media.previewImage?.altText||media.altText||"Product Image",id:extractNumericId(media.id),position:media.position||1,preview_image:{aspect_ratio:media.previewImage?.width&&media.previewImage?.height?media.previewImage.width/media.previewImage.height:.75,height:media.previewImage?.height||252,width:media.previewImage?.width||189,src:media.previewImage?.url||media.url||""},aspect_ratio:media.previewImage?.width&&media.previewImage?.height?media.previewImage.width/media.previewImage.height:.75,height:media.previewImage?.height||252,media_type:media.mediaContentType?.toLowerCase()||"image",src:media.previewImage?.url||media.url||"",width:media.previewImage?.width||189})))};return{id:extractNumericId(graphqlData.id),title:graphqlData.title||"",handle:graphqlData.handle||"",description:graphqlData.description||"",published_at:graphqlData.publishedAt||(new Date).toISOString(),created_at:graphqlData.createdAt||(new Date).toISOString(),vendor:graphqlData.vendor||"",type:graphqlData.type||"",tags:graphqlData.tags||[],price:graphqlData.price??0,price_min:graphqlData.priceMin??0,price_max:graphqlData.priceMax??0,available:graphqlData.availableForSale??!0,price_varies:graphqlData.priceVaries??!1,compare_at_price:graphqlData.compareAtPrice??null,compare_at_price_min:graphqlData.compareAtPriceMin??0,compare_at_price_max:graphqlData.compareAtPriceMax??0,compare_at_price_varies:graphqlData.compareAtPriceVaries??!1,variants:createVariants(graphqlData.variants,graphqlData.images,graphqlData.media),images:extractImages(graphqlData.images),featured_image:graphqlData.featuredImage?.url||extractImages(graphqlData.images)[0]||"",options:extractOptionValues(graphqlData.options||[]),url:`/products/${graphqlData.handle}`,media:extractMedia(graphqlData.media),requires_selling_plan:graphqlData.requiresSellingPlan??!1,selling_plan_groups:graphqlData.sellingPlanGroups||[]}}function create_element_append_to_body(el,elId,display){display||(display="none");var g=document.createElement(el);g.id=elId,g.style="display:"+display,document.body.appendChild(g)}function find_current_variant(section){var variant_id,element=section||document;default_variant=0==default_variant?Object.keys(product_variants)[0]:default_variant;var queries={};if(document.location.search.substr(1).split("&").forEach((function(q){var i=q.split("=");try{queries[i[0].toString()]=i[1].toString()}catch(err){}})),isNaN(queries.variant)){let selector=element.querySelector('form[action="/cart/add"] [name="id"]:checked')||element.querySelector('form[action="/cart/add"] [name="id"]')||element.querySelector('select[name="id"]')||element.querySelector('[name="id"]');variant_id=selector?selector.value:default_variant}else variant_id=queries.variant?queries.variant:element.querySelector("select option[value='"+default_variant+"']").parentNode.value;return variant_id||default_variant}function find_current_variant_from_name(section){let selector=(section||document).querySelector('[name="id"]');return selector?selector.value:null}function is_variant_in_url(){return document.location.href.indexOf("variant=")>=0}function find_current_variant_from_url(){let variantId=null;const urlSearchParams=new URLSearchParams(document.location.search);if(urlSearchParams.has("variant")&&!isNaN(urlSearchParams.get("variant")))return urlSearchParams.get("variant");const hashPart=document.location.hash.substring(1);if(hashPart.includes("variant=")){const hashParams=new URLSearchParams(hashPart.startsWith("?")?hashPart:`?${hashPart}`);if(hashParams.has("variant")&&!isNaN(hashParams.get("variant")))return hashParams.get("variant")}return variantId}function is_array_equal(a1,a2){return JSON.stringify(a1)===JSON.stringify(a2)}function find_variant_media(variant_id){var variant_media;if(variant_id||(variant_id=find_current_variant()),variants_media.hasOwnProperty(variant_id)?variant_media=variants_media[variant_id]:(variant_id=find_current_variant_from_url(),variant_media=variants_media.hasOwnProperty(variant_id)?variants_media[variant_id]:variants_media[default_variant]),!variant_media||0==variant_media.length||skip_showcase_image>=product_media.length)return product_media;if(!is_home&&"no_action"!=only_run_if_variant_in_url&&!is_variant_in_url()){function showcase_images(){return variants_media.g.length?variants_media.g:variant_assigned_media}function skipped_and_showcase_images(){let images=variants_media.skipped.concat(variants_media.g);return images.length?images:variant_assigned_media}if(selection_vid=0,"showcase_only"==only_run_if_variant_in_url)return showcase_images();if("showcase_and_variants"==only_run_if_variant_in_url)return variants_media.g.concat(variant_assigned_media);if("featured_only"==only_run_if_variant_in_url)return[product_media[0]];if("featured_and_showcase"==only_run_if_variant_in_url)return skip_showcase_image>0?[product_media[0]].concat(variants_media.g):showcase_images();if("skipped_and_showcase"==only_run_if_variant_in_url)return skipped_and_showcase_images();if("show_all"==only_run_if_variant_in_url)return product_media}if("at_start"==general_images_position)variant_media=variants_media.g.concat(variant_media);else if("at_end"==general_images_position)variant_media=variant_media.concat(variants_media.g);else if("featured_at_start_showcase_at_end"==general_images_position){const generalImages=variants_media.g;if(generalImages.length>0){const firstElement=[generalImages[0]],restElements=generalImages.slice(1);variant_media=firstElement.concat(variant_media).concat(restElements)}}return variant_media&&0!=variant_media.length?priority_video?moveVideoToFront(variant_media):variant_media:product_media}function moveVideoToFront(arr){const videoIndex=arr.findIndex((obj=>"video"===obj.media_type||"external_video"===obj.media_type));if(videoIndex>-1){const videoObj=arr.splice(videoIndex,1)[0];arr.unshift(videoObj)}return arr}const graphqlQuery="\n    query productDetails(\n        $countryIsoCode: CountryCode,\n        $locale: LanguageCode,\n        $handle: String!,\n        $variantsCursor: String\n    ) @inContext(country: $countryIsoCode, language: $locale) {\n        product(handle: $handle) {\n            id\n            handle\n            title\n            vendor\n            availableForSale\n            onlineStoreUrl\n            tags\n            publishedAt\n            featuredImage{\n                id\n                url\n            }\n            options{\n                id\n                name\n                values\n                optionValues{\n                    id\n                    name\n                }\n            }\n            images(first: 250){\n                nodes{\n                    id\n                    url\n                    altText\n                }\n            }\n            media(first: 250){\n                nodes{\n                    id\n                    previewImage {\n                        url\n                        altText\n                    }\n                    mediaContentType\n                }\n            }\n\n            ... on Product @defer {\n                variants(first: 250, after: $variantsCursor) {\n                    nodes {\n                        id\n                        availableForSale\n                        quantityAvailable\n                        title\n                        sku\n                        image{\n                        id\n                        }\n                        selectedOptions {\n                            name\n                            value\n                        }\n                    }\n                    pageInfo {\n                        hasNextPage\n                        endCursor\n                    }\n                }\n            }\n        }\n    }\n\n";var quick_view_enabled=!1,skip_showcase_image=0,selected_theme_name="Dawn",product_data_source="storefront",storefront_access_token="d5d4b942e170fb7222166d337b6cec24";const is_js_data_source="js"===product_data_source,is_storefront_data_source="storefront"===product_data_source;var priority_video=!1,can_execute_script=!1,only_run_if_variant_in_url="no_action",limit_on_product="none",product_url="",is_product_preview=window.location.href.toLowerCase().indexOf("/products_preview")>=0,is_product_page=/\/products\/|\/produkty\/|\/produkte\//.test(window.location.href.toLowerCase()),is_home="/"==window.location.pathname||/^\/[a-z]{2}\/?$/.test(window.location.pathname),is_pages=window.location.pathname.indexOf("/pages/")>=0,is_collection=1===window.location.pathname.search("collections"),variant_id=0,selection_vid=0,last_variant_images={};if((is_home||is_pages||is_collection||is_product_page||is_product_preview)&&(can_execute_script=!0),quick_view_enabled)var jTimer=setInterval((function(){window.$&&window.jQuery,clearInterval(jTimer)}),10);if(can_execute_script){if(is_home){if("Startup"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"] .product-title a')?document.querySelector('[data-section-type="featured-product"] .product-title a').href:"";else if("Flow"==selected_theme_name)product_url=document.querySelector("#product-box .product-details--form-wrapper a")?document.querySelector("#product-box .product-details--form-wrapper a").href:"";else if("Debut"==selected_theme_name);else if("Success theme"==selected_theme_name);else if("Supply V2"==selected_theme_name)product_url=document.querySelector('[data-section-type="product-template"] a.full-details')?document.querySelector('[data-section-type="product-template"] a.full-details').href:"";else if("Launch"==selected_theme_name)product_url=document.querySelector(".home-featured-product .product-title a")?document.querySelector(".home-featured-product .product-title a").href:"";else if("Responsive"==selected_theme_name)product_url=document.querySelector(".featured-product-section .product_name a")?document.querySelector(".featured-product-section .product_name a").href:"";else if("Streamline"==selected_theme_name);else if("Broadcast"==selected_theme_name)product_url=document.querySelector('[data-section-type="product"] .product__title a')?document.querySelector('[data-section-type="product"] .product__title a').href:"";else if("Palo Alto V2"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a')?document.querySelector('[data-section-type="featured-product"]:first-child .featured-product-title a').href:"";else if("Startup V3"==selected_theme_name)product_url=document.querySelector(".product-title a")?document.querySelector(".product-title a").href:"";else if(["Turbo","Turbo Seoul","Turbo Florence","Turbo Portland","Turbo Chicago","Turbo Dubai","Turbo Tennessee"].indexOf(selected_theme_name)>=0)product_url=document.querySelector(".product_section .product_name a")?document.querySelector(".product_section .product_name a").href:"";else if("Palo Alto V3"==selected_theme_name)product_url=document.querySelector('[data-section-type="featured-product"] .featured-product-title a')?document.querySelector('[data-section-type="featured-product"] .featured-product-title a').href:"";else if("Warehouse"==selected_theme_name)product_url=document.querySelector('[data-section-type="product"]:last-child .product-meta__title a')?document.querySelector('[data-section-type="product"]:last-child .product-meta__title a').href:"";else if("Flex"==selected_theme_name)product_url=document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a")?document.querySelector(".shopify-section.featured-product-section.jsProduct .product-thumbnail__title a").href:"";else if(["Empire V5.1","Superstore V2"].indexOf(selected_theme_name)>=0){let product_links=document.querySelectorAll(".featured-product--container .product-link");product_url=product_links.length?product_links[product_links.length-1].href:""}product_url=product_url.replace(/\/$/,"").split("?")[0].split("#")[0]}else if(is_pages)"Broadcast"==selected_theme_name&&(product_url=document.querySelector('[data-section-type="product"] .product__title a')?document.querySelector('[data-section-type="product"] .product__title a').href:""),"Concept"==selected_theme_name&&(product_url=document.querySelector(".featured-product product-info a.product__more")?.href),product_url=product_url.replace(/\/$/,"").split("?")[0].split("#")[0];else if(is_collection&&!is_product_page){if("Habitat"==selected_theme_name&&(product_url=document.querySelector(".shopify-section.product-section [sa-product-url]")?.href,!product_url)){let intervalId=setInterval((function(){variantImageAutomator(),clearInterval(intervalId)}),200);return}}else product_url=window.location.pathname.replace(/\/$/,"").replace("//","/");if(product_url.length&&(void 0===window.via_product_handle||window.via_product_handle!=product_url)){var productJson;window.via_product_handle=product_url;var variants={},product_variants={};variants.g=[],variants.skipped=[];var product_images=[],default_variant=0,general_images_position="at_end",variant_assigned_images=[],variants_media={},product_media=[];variants_media.g=[],variants_media.skipped=[];var variant_assigned_media=[],product_tags="",variant_assigned_images_ids=[],variant_assigned_media_ids=[],all_variant_media=[],all_variant_images=[];function assign_variants_media(productJson){product_media=productJson.media,productJson.variants.forEach((function(variant){variant.featured_image&&-1==variant_assigned_images_ids.indexOf(variant.featured_image.id)&&(variant_assigned_images_ids.push(variant.featured_image.id),variant_assigned_images.push(variant.featured_image)),variant.featured_media&&-1==variant_assigned_media_ids.indexOf(variant.featured_media.id)&&(variant_assigned_media_ids.push(variant.featured_media.id),variant_assigned_media.push(variant.featured_media)),!default_variant&&variant.available&&(default_variant=variant.id),variant.featured_media&&(all_variant_media[variant.featured_media.id]||(all_variant_media[variant.featured_media.id]=[]),all_variant_media[variant.featured_media.id].push(variant.id)),variants_media[variant.id]=[],variant.featured_image&&(all_variant_images[variant.featured_image.id]||(all_variant_images[variant.featured_image.id]=[]),all_variant_images[variant.featured_image.id].push(variant.id)),variants[variant.id]=[],product_variants[variant.id]=variant}));var general_media=!0,current_variant_ids=[];product_media.forEach((function(media,index){general_media&&-1==variant_assigned_media_ids.indexOf(media.id)?skip_showcase_image>0&&index<skip_showcase_image?variants_media.skipped.push(media):variants_media.g.push(media):(general_media=!1,(current_variant_ids=all_variant_media[media.id]?all_variant_media[media.id]:current_variant_ids).forEach((function(variant_id){variants_media[variant_id].push(media)})))}))}function assign_variant_images(images){var general_images=!0,current_variant_ids=[];(product_images=images).forEach((function(image,index){general_images&&-1==variant_assigned_images_ids.indexOf(image.id)?skip_showcase_image>0&&index<skip_showcase_image?variants.skipped.push(image):variants.g.push(image):(general_images=!1,(current_variant_ids=all_variant_images[image.id]?all_variant_images[image.id]:current_variant_ids).forEach((function(variant_id){variants[variant_id].push(image)})))}))}function is_correct_theme_selected(){let excluded_theme_names="Shogun Page Builder App, GemPages Page Builder App, LayoutHub Easy Page Builder App, MagicZoomPlus App, MyCustomTheme, PageFly Advanced Page Builder App",excluded_stores_domains=["e28ecc.myshopify.com"];if(Shopify.theme&&Shopify.theme.name){let theme_name="Dawn".toLowerCase(),current_live_theme=Shopify.theme.schema_name?.toLowerCase();if(excluded_theme_names.includes(theme_name))return!0;if(!theme_name.includes(current_live_theme)&&"mycustomtheme"!==theme_name&&!excluded_stores_domains.includes(Shopify.shop))return console.log(`If StarApps Variant Image app is not working, please select ${current_live_theme} as theme in app dashboard or request support.`),!1}return!0}function is_restrictable(){return"include_selected"==limit_on_product&&0==/via_enabled|viaenabled|via-enabled|__via_enabled/.test(product_tags.toLowerCase())||"exclude_selected"==limit_on_product&&1==/via_disabled|via-disabled|viadisabled|__via_disabled/.test(product_tags.toLowerCase())}function get_ready_with_data(_callback){var DONE=4,OK=200,xhr_for_js=new XMLHttpRequest;return xhr_for_js.open("GET",product_url+".js",!0),xhr_for_js.send(),xhr_for_js.onreadystatechange=function(){if(xhr_for_js.readyState===DONE&&xhr_for_js.status===OK){if(productJson=JSON.parse(xhr_for_js.responseText),product_tags=productJson.tags.join(),(void 0===productJson.media||0==productJson.media.length)&&0==productJson.images.length)return;assign_variants_media(productJson);var xhr_for_json=new XMLHttpRequest;xhr_for_json.open("GET",product_url+".json",!0),xhr_for_json.send(),xhr_for_json.onreadystatechange=function(){xhr_for_json.readyState===DONE&&(xhr_for_json.status===OK&&(assign_variant_images(JSON.parse(xhr_for_json.responseText).product.images),_callback()))}}},!0}function processJSONInformation(){product_tags=productJson.tags.join();const images=is_storefront_data_source?productJson.images:productJson.product_images;assign_variants_media(productJson),assign_variant_images(images),execute_app_code()}function isNoVariantProduct(){return 1==productJson.variants.length&&productJson.variants[0].title.toLowerCase().includes("default")}const handleProductDataFetch=()=>{is_product_preview||productJson&&productJson.media||(is_js_data_source&&get_ready_with_data(execute_app_code),is_storefront_data_source&&fetchProductDataFromStoreFront(processJSONInformation))};function run(){if(is_product_preview)try{productJson=JSON.parse(document.querySelector("[sa-product-json]").innerText),processJSONInformation()}catch(e){setTimeout((function(){run()}),100)}handleProductDataFetch()}function execute_app_code(){if(!(is_restrictable()||1==product_media.length&&1==product_images.length||isNoVariantProduct())){is_correct_theme_selected();var nTimer=setInterval((function(){if("interactive"==document.readyState||"complete"==document.readyState){clearInterval(nTimer);class SliderComponent2{constructor(section){this.slider=section.querySelector('[id^="Slider-"]'),this.sliderItems=section.querySelectorAll('[id^="Slide-"]'),this.enableSliderLooping=!1,this.currentPageElement=section.querySelector(".slider-counter--current"),this.pageTotalElement=section.querySelector(".slider-counter--total"),this.prevButton=section.querySelector('button[name="previous"]'),this.nextButton=section.querySelector('button[name="next"]'),this.slider&&this.nextButton&&(this.initPages(),this.slider.addEventListener("scroll",this.update.bind(this)),this.prevButton.addEventListener("click",this.onButtonClick.bind(this)),this.nextButton.addEventListener("click",this.onButtonClick.bind(this)))}initPages(){this.sliderItemsToShow=Array.from(this.sliderItems).filter((element=>element.clientWidth>0)),this.sliderLastItem=this.sliderItemsToShow[this.sliderItemsToShow.length-1],0!==this.sliderItemsToShow.length&&(this.slidesPerPage=Math.floor(this.slider.clientWidth/this.sliderItemsToShow[0].clientWidth),this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage+1,this.update())}resetPages(){this.sliderItems=section.querySelectorAll('[id^="Slide-"]'),this.initPages()}update(){const previousPage=this.currentPage;this.currentPage=Math.round(this.slider.scrollLeft/this.sliderLastItem.clientWidth)+1,this.currentPageElement&&this.pageTotalElement&&(this.currentPageElement.textContent=this.currentPage,this.pageTotalElement.textContent=this.totalPages),this.currentPage!=previousPage&&section.dispatchEvent(new CustomEvent("slideChanged2",{detail:{currentPage:this.currentPage,currentElement:this.sliderItemsToShow[this.currentPage-1]}})),this.enableSliderLooping||(this.isSlideVisible(this.sliderItemsToShow[0])?this.prevButton.setAttribute("disabled","disabled"):this.prevButton.removeAttribute("disabled"),this.isSlideVisible(this.sliderLastItem)?this.nextButton.setAttribute("disabled","disabled"):this.nextButton.removeAttribute("disabled"))}isSlideVisible(element,offset=0){const lastVisibleSlide=this.slider.clientWidth+this.slider.scrollLeft-offset;return element.offsetLeft+element.clientWidth<=lastVisibleSlide&&element.offsetLeft>=this.slider.scrollLeft}onButtonClick(event){if(event.preventDefault(),"a4a819-5.myshopify.com"===Shopify.shop)return;const step=event.currentTarget.dataset.step||0;this.slideScrollPosition="next"===event.currentTarget.name?this.slider.scrollLeft+step*this.sliderLastItem.clientWidth:this.slider.scrollLeft-step*this.sliderLastItem.clientWidth,this.slider.scrollTo({left:this.slideScrollPosition})}}class MediaGallery2{constructor(section){this.elements={liveRegion:section.querySelector('[id^="GalleryStatus"]'),viewer:section.querySelector('.starapps[id^="GalleryViewer"]'),thumbnails:section.querySelector('.starapps[id^="GalleryThumbnails"]')},this.mql=window.matchMedia("(min-width: 750px)"),this.elements.thumbnails&&(this.elements.viewer.addEventListener("slideChanged2",debounce(this.onSlideChanged.bind(this),500)),this.elements.thumbnails.querySelectorAll("[data-target]").forEach((mediaToSwitch=>{mediaToSwitch.querySelector("button").addEventListener("click",this.setActiveMedia.bind(this,mediaToSwitch.dataset.target,!1))})),"stacked"!==section.dataset.desktopLayout&&this.mql.matches&&this.removeListSemantic())}onSlideChanged(event){const thumbnail=this.elements.thumbnails.querySelector(`[data-target="${event.detail.currentElement.dataset.mediaId}"]`);this.setActiveThumbnail(thumbnail)}setActiveMedia(mediaId,prepend){const activeMedia=this.elements.viewer.querySelector(`[data-media-id="${mediaId}"]`);if(!activeMedia)return;if(this.elements.viewer.querySelectorAll("[data-media-id]").forEach((element=>{element.classList.remove("is-active")})),activeMedia?.classList?.add("is-active"),prepend){if(activeMedia.parentElement.prepend(activeMedia),this.elements.thumbnails){const activeThumbnail=this.elements.thumbnails.querySelector(`[data-target="${mediaId}"]`);activeThumbnail.parentElement.prepend(activeThumbnail)}this.elements.viewer.slider&&this.elements.viewer.resetPages()}if(this.preventStickyHeader(),window.setTimeout((()=>{this.elements.thumbnails&&activeMedia.parentElement.scrollTo({left:activeMedia.offsetLeft}),this.elements.thumbnails&&"stacked"!==section.dataset.desktopLayout||activeMedia.scrollIntoView({behavior:"smooth"})})),this.playActiveMedia(activeMedia),!this.elements.thumbnails)return;const activeThumbnail=this.elements.thumbnails.querySelector(`[data-target="${mediaId}"]`);this.setActiveThumbnail(activeThumbnail),this.announceLiveRegion(activeMedia,activeThumbnail.dataset.mediaPosition)}setActiveThumbnail(thumbnail){this.elements.thumbnails&&thumbnail&&(this.elements.thumbnails.querySelectorAll("button").forEach((element=>element.removeAttribute("aria-current"))),thumbnail.querySelector("button").setAttribute("aria-current",!0),this.elements.thumbnails.isSlideVisible(thumbnail,10)||this.elements.thumbnails.slider.scrollTo({left:thumbnail.offsetLeft}))}announceLiveRegion(activeItem,position){if(!window.accessibilityStrings.imageAvailable)return;const image=activeItem.querySelector(".product__modal-opener--image img");image&&(image.onload=()=>{this.elements.liveRegion.setAttribute("aria-hidden",!1),this.elements.liveRegion.innerHTML=window.accessibilityStrings.imageAvailable.replace("[index]",position),setTimeout((()=>{this.elements.liveRegion.setAttribute("aria-hidden",!0)}),2e3)},image.src=image.src)}playActiveMedia(activeItem){this.pauseAllMedia();const deferredMedia=activeItem.querySelector(".deferred-media");deferredMedia&&deferredMedia.loadContent(!1)}preventStickyHeader(){this.stickyHeader=this.stickyHeader||document.querySelector("sticky-header"),this.stickyHeader&&this.stickyHeader.dispatchEvent(new Event("preventHeaderReveal"))}removeListSemantic(){this.elements.viewer.slider&&(this.elements.viewer.slider.setAttribute("role","presentation"),this.elements.viewer.sliderItems.forEach((slide=>slide.setAttribute("role","presentation"))))}pauseAllMedia(){this.elements.viewer.querySelectorAll(".js-youtube").forEach((video=>{video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),this.elements.viewer.querySelectorAll(".js-vimeo").forEach((video=>{video.contentWindow.postMessage('{"method":"pause"}',"*")})),this.elements.viewer.querySelectorAll("video").forEach((video=>video.pause())),this.elements.viewer.querySelectorAll("product-model").forEach((model=>{model.modelViewerUI&&model.modelViewerUI.pause()}))}}const updateSrcsetUrls=(srcset,url)=>srcset.split(",").map((src=>{const[ignoreUrl,width]=src.trim().split(" ");return`${url}${width}`})).join(", ");function getMainSection(){const elements=document.querySelectorAll(".product__media-wrapper");return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<750?elements[0]:elements[elements.length-1]}function getProductSectionOnPages(){const elements=document.querySelectorAll(".product__media_container");return elements[elements.length-1]}let isMavon=document.querySelector('[data-section-type="main-product"]');var section=is_pages?getProductSectionOnPages():getMainSection();section=section||(Array.from(document.querySelectorAll(".product__media-wrapper")).pop()||document.querySelector('[data-section-type="main-product"]')||document.querySelector(".product")),create_element_append_to_body("div","multi-variant-info"),create_element_append_to_body("div","multi-variant-popup"),create_element_append_to_body("div","multi-variant-thumb");var main_clone,thumb_clone,main_gallery=section.querySelector("slider-component"),thumb_gallery=section.querySelector(".thumbnail-slider"),thumbnails=thumb_gallery,modal_selector=document.querySelector(".product-media-modal__content");document.getElementById("multi-variant-info").innerHTML=section.querySelector(".product__media-list").innerHTML,document.getElementById("multi-variant-popup").innerHTML=modal_selector?modal_selector.innerHTML:"",document.getElementById("multi-variant-thumb").innerHTML=thumbnails?thumbnails.innerHTML:"",(main_clone=main_gallery.cloneNode(!0)).classList.add("starapps"),thumbnails&&(thumb_clone=thumb_gallery.cloneNode(!0)).classList.add("starapps");var zTimer=setInterval((function(){
if("function"==typeof SliderComponent||isMavon){clearInterval(zTimer);var selectors=document.querySelectorAll('select, .product__info-wrapper, .panda-swatch, .single-option-selector, label, .swatches .swatch-selector, form[action="/cart/add"], product-info');function variant_change_event(){setTimeout((function(){(variant_id=find_current_variant_from_url())||(variant_id=find_current_variant_from_name()),variant_id||(variant_id=find_current_variant()),selection_vid!=variant_id&&(dawn_change_images(variant_id),selection_vid=variant_id)}),100)}selectors&&Object.entries(selectors).forEach((([index,selector])=>{selector.addEventListener("click",variant_change_event,!1),selector.addEventListener("change",variant_change_event,!1)})),dawn_change_images()}}),20);function dawn_change_images(variant_id){if(variant_images=find_variant_media(variant_id),is_array_equal(last_variant_images,variant_images))return;last_variant_images=variant_images,document.dispatchEvent(new CustomEvent("starapps:variant:prechange"));var slide_images="",popup_images="",thumb_images="";variant_images.forEach(((image,index)=>{let main=document.querySelector("#multi-variant-info .slider__slide[data-media-id$='"+image.id+"']");if(main)main.style.display="",main.classList.remove("scroll-trigger--offscreen","scroll-trigger","animate--fade-in","is-active","product__media-item--variant");else{const cloneImgEle=document.querySelector("#multi-variant-info .slider__slide").cloneNode(!0);let sectionId=document.querySelector("product-info").getAttribute("data-section");cloneImgEle.style.display="",cloneImgEle.setAttribute("data-media-id",`${sectionId}-${image.id}`);const imgEleme=cloneImgEle.querySelector(".product__media img");imgEleme.srcset=updateSrcsetUrls(imgEleme.srcset,image.src),cloneImgEle.classList.remove("scroll-trigger--offscreen","scroll-trigger","animate--fade-in","is-active","product__media-item--variant"),main=cloneImgEle}0===index&&main.classList.add("is-active"),slide_images+=main.outerHTML;let thumb=document.querySelector("#multi-variant-thumb li[data-target*='"+image.id+"']");thumb&&(thumb.classList.remove("thumbnail-list_item--variant"),thumb.querySelector("button").removeAttribute("aria-current"),thumb.removeAttribute("style"),thumb.classList.remove("scroll-trigger--offscreen","scroll-trigger","animate--fade-in"),thumb_images+=thumb.outerHTML);let popup=document.querySelector("#multi-variant-popup [data-media-id='"+image.id+"']");popup&&(popup_images+=popup.outerHTML)})),main_gallery.style.display="none",main_gallery.style.opacity=0,thumbnails&&(thumb_gallery.style.display="none",thumb_gallery.style.opacity=0,thumb_clone.querySelector(".thumbnail-list").innerHTML=thumb_images),document.querySelector("slider-component.starapps")&&document.querySelector("slider-component.starapps").remove(),document.querySelector(".starapps.thumbnail-slider")&&document.querySelector(".starapps.thumbnail-slider").remove(),document.querySelectorAll(".slider__slide").forEach((ele=>{ele.classList.remove("is-active")})),main_clone.querySelector(".product__media-list").innerHTML=slide_images,main_clone.querySelector(".product__media-list li").classList.add("is-active"),main_gallery.insertAdjacentHTML("afterend",main_clone.outerHTML),thumbnails&&(thumb_clone.querySelector(".thumbnail-list button.thumbnail").setAttribute("aria-current",!0),thumb_gallery.insertAdjacentHTML("afterend",thumb_clone.outerHTML)),modal_selector&&(document.querySelector(".product-media-modal__content").innerHTML=popup_images),section.querySelector(".slider-counter--current")&&(section.querySelector(".slider-counter--current").innerHTML=1,section.querySelector(".slider-counter--total").innerHTML=variant_images.length),new SliderComponent2(section.querySelector("slider-component.starapps")),thumbnails&&(section.querySelector(".starapps.thumbnail-slider").style.opacity=1,new SliderComponent2(section.querySelector(".starapps.thumbnail-slider")));let elements=Array.from(document.querySelectorAll("slider-component.starapps.slider-mobile-gutter .slider-counter__link")),visibleElements=elements.slice(0,variant_images.length),invisibleElements=elements.slice(variant_images.length);visibleElements.forEach((ele=>ele.style.display="block")),invisibleElements.forEach((ele=>ele.style.display="none"));var media_gallery=section.querySelector("media-gallery");media_gallery&&new MediaGallery2(media_gallery);var slider=section.querySelector('.starapps [id^="Slider-"]');slider&&slider.scrollTo({left:0}),thumbnails&&section.querySelector(".starapps.thumbnail-slider .thumbnail")?.click(),document.dispatchEvent(new CustomEvent("starapps:variant:change")),document.querySelectorAll("slider-component.starapps").forEach((item=>{item.style.opacity=1,item.style.display=""})),"function"==typeof enableZoomOnHover&&enableZoomOnHover(2)}}}),10)}}run()}}};variantImageAutomator();